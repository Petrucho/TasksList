(window["webpackJsonpreact-redux-example"]=window["webpackJsonpreact-redux-example"]||[]).push([[0],{21:function(t,e,r){t.exports=r(33)},31:function(t,e,r){},33:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),o=r(11),c=r.n(o),s=r(5),i=r(9),u=r(18),l=(r(31),r(2)),p=r(3),d=r(6),h=r(4),f=r(7),g=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props,e=t.task,r=t.index;return a.a.createElement("div",{className:"Task"},r," - id:",e.id," username:",e.username," email:",e.email," text:",e.text," status:",e.status)}}]),e}(n.Component),m=r(10),k=r.n(m),b=r(15),y=function(t,e,r){return function(){var n=Object(b.a)(k.a.mark((function n(a){var o,c;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://uxcandy.com/~shapoval/test-task-backend/v2/create?developer=".concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,email:e,text:r})});case 3:return o=n.sent,n.next=6,o.json();case 6:"ok"===(c=n.sent).status&&a({type:"ADD_TASK",username:c.message.username,email:c.message.email,loadedTasksId:c.message.id,title:c.message.text}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("Error with ADDING TASK: ".concat(n.t0,"\n"));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(t){return n.apply(this,arguments)}}()},O=function(t,e,r,n){return function(){var a=Object(b.a)(k.a.mark((function a(o){var c,s,i;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=".concat(t,"&sort_field=").concat(e,"&sort_direction=").concat(r,"&page=").concat(n),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return c=a.sent,a.next=6,c.json();case 6:s=a.sent,i=s.message.tasks,"ok"===s.status&&o({type:"GET_TASKS",loadedTasks:i,totalTasksCount:s.message.total_task_count}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("Error with loading TASKS: ".concat(a.t0,"\n"));case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(t){return a.apply(this,arguments)}}()},E=function(t){try{return{type:"CHANGE_PAGE",currPage:t}}catch(e){console.log("Error with CHANGING PAGE: ".concat(e,"\n"))}},v=function(t){try{return{type:"SORT_BY_FIELD",sort_field:t}}catch(e){console.log("Error with SORTING BY FIELD: ".concat(e,"\n"))}},S=function(t){try{return{type:"TYPE_OF_SORT",sort_direction:t}}catch(e){console.log("Error with TYPE OF SORT: ".concat(e,"\n"))}},T=function(t){function e(){var t,r;Object(l.a)(this,e);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(d.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(a)))).state={},r}return Object(f.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.tasksFetch()}},{key:"componentDidUpdate",value:function(t){t.currPage===this.props.currPage&&t.sort_field===this.props.sort_field&&t.sort_direction===this.props.sort_direction||this.tasksFetch()}},{key:"tasksFetch",value:function(){this.props.getTasks(this.props.currUser,this.props.sort_field,this.props.sort_direction,this.props.currPage)}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},this.props.tasks.map((function(t,e){return a.a.createElement(g,{task:t,index:e+1,key:e})})))}}]),e}(n.Component);var C=Object(s.b)((function(t){return{tasks:t.tasks,sort_field:t.sort_field,sort_direction:t.sort_direction,currPage:t.currPage,currUser:t.currUser,currEmail:t.currEmail}}),(function(t){return{getTasks:function(e,r,n,a){return t(O(e,r,n,a))}}}))(T),_=function(t){function e(t){var r;return Object(l.a)(this,e),(r=Object(d.a)(this,Object(h.a)(e).call(this,t))).onChange=function(t){r.setState({title:t.target.value})},r.onSubmit=function(){r.props.addTask("test","test@test.com","test job"),r.setState({title:""})},r.state={title:""},r}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"AddTask"},a.a.createElement("input",{onChange:this.onChange,value:this.state.title}),a.a.createElement("button",{onClick:this.onSubmit},"Append task"))}}]),e}(n.Component);var j=Object(s.b)((function(t){return{currUser:t.currUser,currEmail:t.currEmail}}),(function(t){return{addTask:function(e,r,n){return t(y(e,r,n))}}}))(_),P=function(t){function e(){var t,r;Object(l.a)(this,e);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(d.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(a)))).state={},r.onClick=function(t){switch(t.target.innerText){case"First page":r.props.changePage(1);break;case"Prev page":r.props.currPage>1&&r.props.changePage(r.props.currPage-1);break;case"Next page":Math.ceil(r.props.totalTasksCount/r.props.pagination)>=r.props.currPage+1&&r.props.changePage(r.props.currPage+1);break;case"Last page":r.props.currPage<Math.ceil(r.props.totalTasksCount/r.props.pagination)&&r.props.changePage(Math.ceil(r.props.totalTasksCount/r.props.pagination));break;default:r.props.changePage(1)}},r.onClickSortByField=function(t){switch(t.target.innerText){case"Sort by ID":r.props.changeSortByField("id");break;case"Sort by username":r.props.changeSortByField("username");break;case"Sort by email":r.props.changeSortByField("email");break;case"Sort by status":r.props.changeSortByField("status");break;default:r.props.changeSortByField("id")}},r.onClickTypeOfSort=function(t){switch(t.target.innerText){case"ASC":r.props.changeTypeOfSort("asc");break;case"DESC":r.props.changeTypeOfSort("desc");break;default:r.props.changeTypeOfSort("asc")}},r}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"Footer"},a.a.createElement("div",{className:"Buttons"},a.a.createElement("p",null,"Current page ",this.props.currPage),a.a.createElement("button",{onClick:this.onClick},"First page"),a.a.createElement("button",{onClick:this.onClick},"Prev page"),a.a.createElement("button",{onClick:this.onClick},"Next page"),a.a.createElement("button",{onClick:this.onClick},"Last page")),a.a.createElement("div",{className:"SortingField"},a.a.createElement("p",null,"Current sorting field: ",this.props.sort_field),a.a.createElement("button",{onClick:this.onClickSortByField},"Sort by ID"),a.a.createElement("button",{onClick:this.onClickSortByField},"Sort by username"),a.a.createElement("button",{onClick:this.onClickSortByField},"Sort by email"),a.a.createElement("button",{onClick:this.onClickSortByField},"Sort by status")),a.a.createElement("div",{className:"SortingType"},a.a.createElement("p",null,"Type of sorting: ",this.props.sort_direction),a.a.createElement("button",{onClick:this.onClickTypeOfSort},"ASC"),a.a.createElement("button",{onClick:this.onClickTypeOfSort},"DESC")))}}]),e}(n.Component);var w=Object(s.b)((function(t){return{currPage:t.currPage,totalTasksCount:t.totalTasksCount,pagination:t.pagination,sort_field:t.sort_field,sort_direction:t.sort_direction}}),(function(t){return{changePage:function(e){return t(E(e))},changeSortByField:function(e){return t(v(e))},changeTypeOfSort:function(e){return t(S(e))}}}))(P);var x=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(C,null),a.a.createElement(j,null),a.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=r(19),F=r(20);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(r,!0).forEach((function(e){Object(A.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var B={tasks:[],sort_field:"id",sort_direction:"asc",currPage:1,totalTasksCount:0,currUser:"admin",currEmail:"example@example.com",pagination:3},G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,I=Object(i.d)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TASK":return{tasks:[].concat(Object(F.a)(t.tasks),[{title:e.title,done:!1}])};case"GET_TASKS":return N({},t,{tasks:e.loadedTasks,totalTasksCount:e.totalTasksCount});case"CHANGE_PAGE":return N({},t,{currPage:e.currPage});case"SORT_BY_FIELD":return N({},t,{sort_field:e.sort_field});case"TYPE_OF_SORT":return N({},t,{sort_direction:e.sort_direction});default:return t}}),G(Object(i.a)(u.a)));c.a.render(a.a.createElement(s.a,{store:I},a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.e564ea83.chunk.js.map